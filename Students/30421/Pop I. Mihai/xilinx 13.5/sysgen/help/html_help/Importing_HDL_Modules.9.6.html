<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Black Box Examples</title>
    <link rel="StyleSheet" href="css/Importing_HDL_Modules.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body class="" style="" onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table align="left" summary="">
      <tr>
        <td class="WebWorks_Company_Logo_Top">
          <img src="logo.gif" alt="" />
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Importing_HDL_Modules.9.1.html#270772">Importing HDL Modules</a> : Black Box Examples</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1"><a name="270772">Black Box Examples</a></div>
      <div class="Body"><a name="282740">&nbsp;</a></div>
      <table class="ColumnNoTitleNoLines" style="text-align: left; width: 381.5114pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top; width: 148.8664pt;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#274983', '');" title="Black Box Examples" name="282694">Black Box Tutorial Example 1: Importing a Core Generator Module that Satisfies Black Box HDL Requirements</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top; width: 232.645pt;">
            <div class="CellBody"><a name="282697">Describes an approach that uses the System Generator </a>Black Box Configuration Wizard. </div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#275339', '');" title="Black Box Examples" name="282701">Black Box Tutorial Example 2: Importing a Core Generator Module that Needs a VHDL Wrapper to Satisfy Black Box HDL Requirements</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282704">Describes an approach that requires that you to </a>provide a VHDL core wrapper. Simulation issues are also addressed.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#282397', '');" title="Black Box Examples" name="282708">Black Box Tutorial Example 3: Importing a VHDL Module</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282711">Describes how to use the Black Box block to import </a>VHDL into a System Generator design and how to use ModelSim to co-simulate.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#282770', '');" title="Black Box Examples" name="282715">Black Box Tutorial Example 4: Importing a Verilog Module</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282718">Demonstrates how Verilog black boxes can be used in </a>System Generator and co-simulated using ModelSim.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#282523', '');" title="Black Box Examples" name="282722">Black Box Tutorial Example 5: Dynamic Black Boxes</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282725">Demonstrates dynamic black boxes using a transpose </a>FIR filter black box that dynamically adjusts to changes in the widths of its inputs.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#282530', '');" title="Black Box Examples" name="282729">Black Box Tutorial Example 6: Simulating Several Black Boxes Simultaneously</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282732">Demonstrates how several System Generator Black </a>Box Blocks can be co-simulated simultaneously, using only one ModelSim license while doing so.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#282566', '');" title="Black Box Examples" name="282736">Black Box Tutorial Exercise 7: Advanced Black Box Example Using ModelSim</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="282739">Describes how to design a Black Box block with a </a>dynamic port interface and how to configure a black box using mask parameters. Also, describes how to assign generic values based on input port data types and how to save black box blocks in Simulink libraries for later reuse. How to specify custom scripts for ModelSim HDL co-simulation is also covered.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#296979', '');" title="Black Box Examples" name="296939">Black Box Tutorial Example 8: Importing, Simulating, and Exporting an Encrypted VHDL File</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="296942">Describes how to import an encrypted VHDL file into </a>a Black Box, simulate the design, then export the encrypted VHDL file separately from the rest of the design netlist.</div>
          </td>
        </tr>
        <tr>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#307233', '');" title="Black Box Examples" name="307210">Black Box Tutorial Exercise 9: Prompting a User for Parameters in a Simulink Model and Passing Them to a Black Box</a></span></div>
          </td>
          <td style="padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top;">
            <div class="CellBody"><a name="307212">Describes how to access generics/parameters from </a>the masked counter and pass them onto the black box to override the default local parameters in the VHDL file.</div>
          </td>
        </tr>
      </table>
      <div class="Heading2"><a name="282743">Importing a Xilinx </a>Core Generator Module</div>
      <div class="Body"><a name="282744">This topic describes two different ways of importing Xilinx CORE Generator™ modules, </a>as black boxes, into System Generator. The first example shows how to import blocks which satisfy <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.2.html#279296', '');" title="Black Box HDL Requirements and Restrictions">Black Box HDL Requirements and Restrictions</a></span>. The second example shows how to write a VHDL wrapper to import CORE Generator™ modules as black boxes. The flow graph below illustrates the process of importing CORE generator modules. </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="282753"><img class="Default" src="images/Importing_HDL_Modules.9.6.1.jpg" width="530" height="456" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Heading3"><a name="274983">Black Box Tutorial Example 1: Importing a Core Generator Module that </a>Satisfies Black Box HDL Requirements</div>
      <div class="Numbered_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="275327">Start CORE Generator and open the the following CORE Generator project file: </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/coregen_import/example1</span><span class="Filename">/coregen_import_example1.cgp</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="274977">Double click the CORDIC 4.0 icon to launch the customization GUI</a></div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="294950"><img class="Default" src="images/Importing_HDL_Modules.9.6.2.jpg" width="807" height="398" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="274994">Parameterize and generate the CORDIC 4.0 core with component name </a><span class="Filename">cordic_sincos</span>, a functional Selection of <span class="Bold">Sin and Cos</span> and the remaining options set to be the default values as shown below:</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275142"><img class="Default" src="images/Importing_HDL_Modules.9.6.3.jpg" width="529" height="373" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="275252">&nbsp;</a></div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275259"><img class="Default" src="images/Importing_HDL_Modules.9.6.4.jpg" width="526" height="378" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="275267">&nbsp;</a></div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275274"><img class="Default" src="images/Importing_HDL_Modules.9.6.5.jpg" width="526" height="374" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275071">Click </a><span class="Bold">Generate</span>. Core Generator produces the following files after generation: </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Filename"><a name="275072">cordic_sincos.ngc</a></span>: Implementation netlist </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Filename"><a name="275073">cordic_sincos.vhd</a></span>: VHDL wrapper for behavioral simulation </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Filename"><a name="275009">cordic_sincos.vho</a></span>: Core instantiation template </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Filename"><a name="275011">cordic_sincos.xco</a></span>: Parameters selected for core generation </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">5.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275015">Start Simulink and open the design file </a>(<span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/coregen_import/example</span><span class="Filename">1/coregen_import_example1.mdl</span>) </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">6.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="274999">Drag and drop the black box from the Xilinx "Basic Elements" library into the model </a><span class="Filename">coregen_import_example1.mdl</span>. Select <span class="Filename">cordic_sincos.vhd</span> for the top-level HDL file and click <span class="Bold">Open</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="275297"><img class="Default" src="images/Importing_HDL_Modules.9.6.6.jpg" width="672" height="375" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">7.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275095">Connect the input and output ports of the black box to the open wires. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">8.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275087">Open the </a><span class="Filename">cordic_sincos_config.m</span> file, and add the EDIF netlist to the black box file list as shown below. This file will get included as part of the System Generator netlist for the design when it is netlisted.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275176"><img class="Default" src="images/Importing_HDL_Modules.9.6.7.jpg" width="511" height="256" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">9.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275107">Open the black box parameterization GUI and select </a><span class="Bold">ISE Simulator</span> for the simulation mode.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275194"><img class="Default" src="images/Importing_HDL_Modules.9.6.8.jpg" width="527" height="385" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">10.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275112">Press the </a><span class="Bold">Simulate</span> button to compile and co-simulate the CORDIC core using the ISE simulator. The simulation results are as shown below.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275212"><img class="Default" src="images/Importing_HDL_Modules.9.6.9.jpg" width="529" height="429" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Heading3"><a name="275339">Black Box Tutorial Example 2: Importing a Core Generator Module that </a>Needs a VHDL Wrapper to Satisfy Black Box HDL Requirements</div>
      <div class="Numbered_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="292342">Start Core Generator and open the Core Generator following project file: </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/coregen_import/example2</span><span class="Filename">/coregen_import_example2.cgp</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="292343">As shown below, double click the </a><span class="Bold">FIR Compiler </span>icon to launch the customization GUI.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="292353"><img class="Default" src="images/Importing_HDL_Modules.9.6.10.jpg" width="983" height="409" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="292344">Customize and generate the FIR Compiler 4.0 core with the following parameters:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275367">Component Name: </a><span class="Bold">fir_compiler_8tap</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275373">Load Coefficients: </a><span class="Bold">fir_compiler_8tap.coe</span> file located in sysgen directory </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275375">Input Sampling Frequency: </a><span class="Bold">25</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="294352">Clock Frequency:</a><span class="Bold"> 300</span></div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="292403"><img class="Default" src="images/Importing_HDL_Modules.9.6.11.jpg" width="983" height="515" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="293388">Leave the other parameters set to the default values</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="293985">Click </a><span class="Bold">Next &gt;</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="292394">In this frame, leave the options set to the default values.</a></div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="292576"><img class="Default" src="images/Importing_HDL_Modules.9.6.12.jpg" width="983" height="514" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="293921">Click </a><span class="Bold">Next &gt;</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="294124">This example will show you how to import a core that does not have a CE (clock </a>enable) port. As shown below, verify that the CE port option is not selected, then click <span class="Bold">Generate</span>..</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="294123"><img class="Default" src="images/Importing_HDL_Modules.9.6.13.jpg" width="983" height="516" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275519">CORE Generator produces the following files:</a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="294676">fir_compiler_8tap.ngc</a></span>: Implementation netlist</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="294677">fir_compiler_8tap.vhd</a></span>: VHDL wrapper for behavioral simulation</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="294678">fir_compiler_8tap.vho</a></span>: Core instantiation template</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="294679">fir_compiler_8tap.xco</a></span>: Parameters selected for core generation</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="294680">Multiple </a><span class="Bold">.mif</span> files:  Memory initialization files for functional simulation</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">5.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="294669">Since this core does not have a </a><span class="Filename">ce</span> port and the System Generator blackbox requires a <span class="Filename">clk</span>, <span class="Filename">ce</span> pair, you need to specify a core wrapper to add a <span class="Filename">ce</span> port to the top level. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">6.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275523">Open the following empty template wrapper file: </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/coregen_import/example2</span><span class="Filename">/ fir_compiler_8tap_wrapper.vhd</span> </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body2"><a name="282263">This file contains an empty entity declaration. </a></div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">7.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275527">Modify the template wrapper according to the instructions below: </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275529">Open the </a><span class="Filename">fir_compiler_8tap.vho</span> file. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275531">Copy the component declaration from </a><span class="Filename">fir_compiler_8tap.vho</span> and paste it in <span class="Filename">fir_compiler_8tap_wrapper.vhd</span> in the component declaration area. <br />(after <span class="Filename">-- Add Component Declaration from VHO file ------</span>) </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275533">Copy the core instantiation template from </a><span class="Filename">fir_compiler_8tap.vho</span> and paste it in <span class="Filename">fir_compiler_8tap_wrapper.vhd</span> in the architecture body. <br />(after<span class="Filename"> ------------- ADD INSTANTIATION Template -----</span>) </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275535">Copy the port declaration for the component </a><span class="Filename">fir_compiler_8tap</span> and paste it for the <span class="Filename">fir_compiler_8tap</span> entity declaration <br />(after <span class="Filename">---- Add Port declaration for entity ----</span>) </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><a name="275361">Add the </a><span class="Filename">ce</span> port to the top-level entity declaration, and change the case of the <span class="Filename">CLK</span> port to <span class="Filename">clk</span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275814"><img class="Default" src="images/Importing_HDL_Modules.9.6.14.jpg" width="608" height="576" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">8.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275628">Start Simulink and open the following design file: </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/coregen_import/example2</span><span class="Filename">/coregen_import_example2.mdl</span></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">9.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275624">Drag and drop the black box from the "Basic Elements" library in the </a><span class="Filename">coregen_import_example2.mdl</span>. Select <span class="Filename">fir_compiler_8tap_wrapper.vhd</span> for the top-level HDL file.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="275928"><img class="Default" src="images/Importing_HDL_Modules.9.6.15.jpg" width="1056" height="423" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">10.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="294818">Connect the black box to the open wires. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">11.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="294819">Open the </a><span class="Filename">fir_compiler_8tap_wrapper_config.m</span> file, and add the VHDL file, EDIF netlist and MIF files to the black box file list as shown below. These files get included as part of the System Generator netlist for the design when it is generated. </div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="294826"><img class="Default" src="images/Importing_HDL_Modules.9.6.16.jpg" width="531" height="161" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Note">
        <span class="XNote">Note:&nbsp;</span><a name="275664">The order in which the files are added in the configuration function is the order in which they </a>get compiled during synthesis and simulation.</div>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">12.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275665">Open the black box parameterization GUI and select the </a><span class="Bold">ISE Simulator</span> for simulation mode.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275866"><img class="Default" src="images/Importing_HDL_Modules.9.6.17.jpg" width="518" height="332" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="NumberedCont_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">13.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="275680">Press the </a><span class="Bold">Simulate</span> button to compile and co-simulate the FIR core using the ISE simulator. The simulation results are as shown below.</div>
            </td>
          </tr>
        </table>
      </div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;">
            <div class="Anchor"><a name="275885"><img class="Default" src="images/Importing_HDL_Modules.9.6.18.jpg" width="518" height="389" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Heading2"><a name="270774">Importing a VHDL Module </a></div>
      <div class="Heading3"><a name="282397">Black Box Tutorial Example 3: Importing a VHDL Module</a></div>
      <div class="Body"><a name="276015">This topic explains how to use the black box to import VHDL into a System Generator </a>design and how to use ModelSim to co-simulate the VHDL module. </div>
      <div class="Numbered_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="276019">From the MATLAB console, change the directory to </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/intro</span>. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body2"><a name="282288">The following files are located in this directory: </a></div>
      <div class="BulletedSub_outer" style="margin-left: 18pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Filename"><a name="276023">black_box_intro.mdl</a></span> - A Simulink model containing an example black box. </div>
            </td>
          </tr>
        </table>
      </div><a href="javascript:void();" onClick="WWHFrame.WWHBrowser.fMLProtocol('cd(xilinx.environment.getpath(\'sysgen\'));cd examples/black_box/intro;open black_box_intro.mdl')">(Open this model)</a><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><span class="Filename"><a name="276025">transpose_fir.vhd</a></span> - Top-level VHDL for a transpose form FIR filter. This file is the VHDL that is associated with the black box. </div></td></tr></table></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><span class="Filename"><a name="276027">mac.vhd</a></span> – Multiply and add component used to build the transpose FIR filter. </div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276031">Open the</a><span class="Filename"> black_box_intro</span> model from the MATLAB command window by typing</div></td></tr></table></div><div class="Code"><a name="276032"> &gt;&gt; black_box_intro</a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276003">Open the subsystem named </a><span class="Bold">Transpose FIR Filter Black Box</span>. At this point, the subsystem contains two inports and one outport. The black box subsystem is shown below:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276495"><img class="Default" src="images/Importing_HDL_Modules.9.6.19.jpg" width="518" height="217" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276085">Go to the Simulink Library Browser and add a black box block to this subsystem. The </a>black box is located in the Xilinx Blockset's Basic Elements library. The Black Box Configuration Wizard is automatically invoked when a new black box is added to the subsystem. A browser window appears that lists the VHDL source files that can be associated with the black box. From this window, select the top -level VHDL file <span class="Filename">transpose_fir.vhd</span>. This is illustrated in the figure below:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276505"><img class="Default" src="images/Importing_HDL_Modules.9.6.20.jpg" width="518" height="225" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Note"><span class="XNote">Note:&nbsp;</span><a name="276090">The wizard will only run if the black box is added to a model that has been saved to a file. If </a>the model has not been saved, the wizard does not know where to search for files and System Generator will instead display a warning that looks like the following:</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276517"><img class="Default" src="images/Importing_HDL_Modules.9.6.21.jpg" width="518" height="129" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">5.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276095">The wizard parses the VHDL to generate a configuration M-function for the black box. </a>This is a MATLAB script that, among other things, associates the black box to the VHDL and creates black box ports. Once the function has run, the ports on the black box match those in the top-level VHDL entity (not including clock and clock enable ports). This is illustrated below:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276527"><img class="Default" src="images/Importing_HDL_Modules.9.6.22.jpg" width="518" height="215" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="276107">Be aware of the following rules when working this example: </a></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><a name="276111">A synchronous HDL design that is associated with a black box must have one or </a>more clock and clock enable ports. These ports must occur in pairs, one clock for each clock enable, and vice-versa. Each of these ports must be of type std_logic. The name of the clock port must contain the substring clk. The name of the clock enable port must be the same as the name of the clock port, but with <span class="Filename">ce</span> substituted for <span class="Filename">clk</span>. </div></td></tr></table></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><a name="276103">The clock enable port has a specific meaning to System Generator and is not a </a>general purpose user enable for the block. Refer to the topic <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.2.html#279296', '');" title="Black Box HDL Requirements and Restrictions">Black Box HDL Requirements and Restrictions</a></span> for details.</div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">6.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276153">Double click on the black box block. The dialog box shown below appears:</a></div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276546"><img class="Default" src="images/Importing_HDL_Modules.9.6.23.jpg" width="518" height="329" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="276166">The following are the fields in the dialog box: </a></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><span class="Bold"><a name="276170">Block configuration M-function</a></span> - This specifies the name of the configuration M-function for the black box. In this example, the field contains the name of the function that was generated by the Configuration Wizard. By default, the black box uses the function the wizard produces. You can, however, substitute one you produce yourself. For more information on the configuration M-function, refer to the topic <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.4.html#280204', '');" title="Black Box Configuration M-Function">Black Box Configuration M-Function</a></span>. </div></td></tr></table></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><span class="Bold"><a name="276174">Simulation mode</a></span> - There are three simulation modes: </div></td></tr></table></div><div class="BulletedSubSub_outer" style="margin-left: 36pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSubSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSubSub_inner"><span class="Bold"><a name="276176">Inactive</a></span> - When the mode is Inactive, the black box participates in the simulation by ignoring its inputs and producing zeros. This setting is typically used when a separate simulation model is available for the black box, and the model is wired in parallel with the black box using a simulation multiplexer. <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#274983', '');" title="Black Box Examples">Black Box Tutorial Example 1: Importing a Core Generator Module that Satisfies Black Box HDL Requirements</a></span> shows how this is accomplished. </div></td></tr></table></div><div class="BulletedSubSub_outer" style="margin-left: 36pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSubSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSubSub_inner"><span class="Bold"><a name="276178">ISE Simulator</a></span> - When the mode is <span class="Bold">ISE Simulator</span>, simulation results for the black box are produced using co-simulation on the HDL associated to the black box. </div></td></tr></table></div><div class="BulletedSubSub_outer" style="margin-left: 36pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSubSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSubSub_inner"><span class="Bold"><a name="291402">External co-simulator</a></span> - When the mode is <span class="Bold">External co-simulator</span>, it is necessary to add a ModelSim HDL co-simulation block to the design, and to specify the name of the ModelSim block in the field labeled <span class="Bold">HDL co-</span><span class="Bold">simulator to use</span>. In this mode, the black box is simulated using HDL co-simulation. </div></td></tr></table></div><div class="BulletedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div></td><td width="100%"><div class="BulletedSub_inner"><span class="Bold"><a name="276184">FPGA Area Estimation </a></span>- The numbers entered in this field are estimates of how much of the FPGA is used by the HDL for the black box. These numbers must be entered by hand. The numbers are only needed if you would like to use the resource estimating utilities supplied with System Generator. For more information, see <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'HW_Design.6.4.html#270827', '');" title="System-Level Modeling in System Generator">Resource Estimation</a></span>. </div></td></tr></table></div><div class="Body2"><a name="276188">To continue the tutorial, leave the parameters set as they currently are. </a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">7.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276192">Wire the black box's ports to the corresponding subsystem ports. </a></div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">8.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276161">Run the simulation by clicking the Simulation </a><span class="Bold">Play</span> button and then double click on the scope block. Notice the black box output shown in the <span class="Filename">Output</span><span class="Filename">&nbsp;</span><span class="Filename">Signa</span>l scope is zero. This is expected as the black box is configured to be inactive during simulation.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276592"><img class="Default" src="images/Importing_HDL_Modules.9.6.24.jpg" width="518" height="343" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">9.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276258">Go to the Simulink Library Browser and add a ModelSim block to this subsystem. The </a>ModelSim block is located in the <span class="Bold">Xilinx Blockset /Tools</span> library. This block enables the black box to communicate with a ModelSim simulator. Double click on the ModelSim block to open the dialog box shown below:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276608"><img class="Default" src="images/Importing_HDL_Modules.9.6.25.jpg" width="518" height="296" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">10.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276269">Make sure the parameters match those shown in the preceding figure. Close the dialog </a>box. </div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">11.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276273">From the Simulink menu, select </a><span class="Bold">Port Data Types</span> from the <span class="Bold">Format</span> menu to display the port types for the black box. Compile the model (<span class="Filename">Ctrl-d</span>) to ensure the port data types are up to date. Notice that the black box port output type is <span class="Filename">UFix_26_0</span>. This means it is unsigned, 26 bits wide and has a binary point 0 positions to the left of the least significant bit. </div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">12.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276277">Open the configuration M-function </a><span class="Filename">transpose_fir_config.m</span> and change the output type from <span class="Filename">UFix_26_0</span> to <span class="Filename">Fix_26_12</span>. The modified line should read: </div></td></tr></table></div><div class="Code"><a name="276281">dout_port.setType('Fix_26_12'); </a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">13.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276285">Edit the configuration M-function to associate an additional HDL file with the black </a>box. Locate the line: </div></td></tr></table></div><div class="Code"><a name="276289">this_block.addFile('transpose_fir.vhd'); </a></div><div class="Body2"><a name="276293">Immediately above this line, add the following: </a></div><div class="Code"><a name="276297">this_block.addFile('mac.vhd'); </a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">14.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276265">Save the changes to the configuration M-function and recompile the model (</a><span class="Filename">Ctrl-d</span>). Your subsystem should appear as follows:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276639"><img class="Default" src="images/Importing_HDL_Modules.9.6.26.jpg" width="518" height="226" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">15.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276377">From the black box block parameter dialog box, change the Simulation mode field </a>from <span class="Bold">Inactive</span> to <span class="Bold">External co-simulator</span>. Enter <span class="Filename">ModelSim</span> in the <span class="Bold">HDL co-simulator to </span><span class="Bold">use</span> field. The name in this field corresponds to the name of the ModelSim block that you added to the model. The black box dialog box should appear as follows:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="276658"><img class="Default" src="images/Importing_HDL_Modules.9.6.27.jpg" width="518" height="328" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">16.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276748">Run the simulation. A ModelSim command window and waveform viewer opens. </a>ModelSim simulates the VHDL while Simulink controls the overall simulation. The resulting waveform looks something like the following:</div></td></tr></table></div><table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;"><div class="Anchor"><a name="276771"><img class="Default" src="images/Importing_HDL_Modules.9.6.28.jpg" width="647" height="335" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="276756">The following warnings received in ModelSim can safely be ignored. </a></div><div class="Code"><a name="276440"># ** Warning: There is an 'U'|'X'|'W'|'Z'|'-' in an arithmetic operand, </a>the result will be 'X'(es). </div><div class="Code"><a name="276442">#  Time: 0 ps  Iteration: 0  Instance: / </a>xlcosim_black_box_ex1_down_converter_transpose_fir_filter_bl ack_box_modelsim/ black_box_ex1_down_converter_transpose_fir_filter_black_box_ black_box/g0__22/g_last/m2 </div><div class="Code"><a name="276468">&nbsp;</a></div><div class="Body2"><a name="276469">They are caused by the black box VHDL not specifying initial values at the start of </a>simulation.</div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">17.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="282939">Examine the scope output after the simulation has completed. When the Simulation </a>Mode was set to <span class="Bold">Inactive</span>, the Output Signal scope displayed constant zero. Notice the waveform is no longer zero. Instead, Output Signal shows the results from the ModelSim simulation.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="282946"><img class="Default" src="images/Importing_HDL_Modules.9.6.29.jpg" width="518" height="340" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Heading2"><a name="282949">Importing a</a> Verilog Module</div><div class="Body"><a name="282950">This example demonstrates how Verilog black boxes can be used in System Generator and </a>co-simulated using ModelSim. Verilog modules are imported the same way VHDL modules are imported. For more information on how this is done, seethe topics <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.3.html#279618', '');" title="Black Box Configuration Wizard">Black Box Configuration Wizard</a></span> and <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.4.html#280204', '');" title="Black Box Configuration M-Function">Black Box Configuration M-Function</a></span>. System Generator provides all of the code that is needed to incorporate Verilog black boxes, both to generate hardware and to co-simulate HDL. System Generator also allows Verilog black boxes to be parameterized. This example demonstrates all of these capabilities. The files for this example are contained in the following directory: </div><div class="Code"><a name="276929">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/example4. </a></div><div class="Body"><a name="276844">The files are: </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="276848">black_box_ex4.mdl</a></span> – A Simulink model with two black boxes, one using VHDL and the other using Verilog. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="276852">word_parity_block.vhd</a></span> – The VHDL for the combinational portion of the state machine seen in word parity example presented above. This is a purely combinational (stateless) block that computes the parity of each input word and outputs the parity bit. It has been parameterized with a generic so that it can accept any input type (see the description of dynamic black boxes for a discussion of generics). </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="276856">word_parity_block_config.m</a></span> – The configuration M-function for the VHDL black box, including the generic setting. The M-function tags this block as combinational so that it simulates correctly in Simulink. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="276860">shutter.v</a></span> – The Verilog for a simple synchronous latch. The code has been parameterized so that the input port din can have arbitrary width. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="276864">shutter_config.m</a></span> – The configuration M-function for the Verilog black box, including the parameter setting. The configuration M-function uses methods referring to VHDL syntax even for configuring Verilog black boxes. Thus for this black box, you have the lines: </div></td></tr></table></div><div class="Code"><a name="276868">this_block.setEntityName('shutter'); </a></div><div class="Code"><a name="282767">this_block.addGeneric('din_width', dwidth); </a></div><div class="Heading3"><a name="282770">Black Box Tutorial Example 4: Importing a Verilog Module</a></div><div class="Numbered_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div></td><td width="100%"><div class="Numbered_inner"><a name="282771">Navigate into the example4 directory and open the example model. </a></div></td></tr></table></div><div class="Body2"><a href="javascript:void();" onClick="WWHFrame.WWHBrowser.fMLProtocol('cd(xilinx.environment.getpath(\'sysgen\'));cd examples/black_box/example4;open black_box_ex4.mdl')">(Open this model)</a> </div><div class="Body2"><a name="288887">This is a simple design with two black boxes, one VHDL and the other Verilog. The </a>VHDL black box computes the parity of each input word, and the Verilog black box latches the words that have odd parity. No Simulink model is used to compute the behavior of the black boxes; instead, HDL co-simulation is used. The example model is shown in the figure below.</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="282778"><img class="Default" src="images/Importing_HDL_Modules.9.6.30.jpg" width="518" height="301" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="276981">You must have a license for mixed-mode ModelSim simulation to run this example. If </a>you do and you run the simulation, you will see a ModelSim waveform window that looks like the one captured below. The behavior of both black boxes is shown. You can browse the design structure in ModelSim to see how System Generator has combined the two black boxes. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="276973">Change the input type to an arbitrary type and rerun the simulation. Both black boxes </a>adjust in the appropriate way to the change.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277020"><img class="Default" src="images/Importing_HDL_Modules.9.6.31.jpg" width="526" height="314" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Heading2"><a name="276975">Dynamic</a> Black Boxes</div><div class="Body"><a name="277036">This example extends the transpose FIR filter black box so that it is dynamic, i.e., able to </a>adjust to changes in the widths of its inputs. The example is contained in the directory <span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/example3</span>. For this example to run correctly, you must change your directory (cd within the MATLAB command window) to this directory before launching the example model. </div><div class="Body"><a name="277040">The files contained in this directory are: </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="288872">black_box_ex3.mdl</a></span> - A Simulink model containing a dynamic black box. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="288874">transpose_fir_parametric.vhd</a></span> – The VHDL for the transpose FIR filter. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="277052">mac.vhd</a></span> – Multiply and add component used to build the transpose FIR filter. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="277056">transpose_fir_parametric_config.m</a></span> – The configuration M-function for the black box. </div></td></tr></table></div><div class="Heading3"><a name="282523">Black Box Tutorial Example 5: Dynamic Black Boxes</a></div><div class="Numbered_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div></td><td width="100%"><div class="Numbered_inner"><a name="289962">Open the model by typing </a><span class="Filename">black_box_ex3</span> at the <span class="Bold">MATLAB</span> command prompt. <a href="javascript:void();" onClick="WWHFrame.WWHBrowser.fMLProtocol('cd(xilinx.environment.getpath(\'sysgen\'));cd examples/black_box/example3;open black_box_ex3.mdl')">(Open this model)</a></div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="277064">Run the simulation from the top-level model, and view the results displayed in the </a>scopes. </div></td></tr></table></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="277030">Reduce the number of bits on the gateway </a><span class="Bold">Din Gateway In</span> from 16 bits down to 12 and the binary point from 14 to 10, then run the simulation again. Note that both the input and output widths on the black box adjust automatically. The black box subsystem and simulation results should look like those shown below.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277263"><img class="Default" src="images/Importing_HDL_Modules.9.6.32.jpg" width="526" height="245" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body"><a name="277267">&nbsp;</a></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277278"><img class="Default" src="images/Importing_HDL_Modules.9.6.33.jpg" width="526" height="395" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="277118">The black box is able to adjust to changes in input width because of its configuration </a>M-function. To make this work, the M-function must be augmented by hand. Open the M-function file transpose_fir_parametric.m. The important points are described below. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="277122">Obtaining data input width: </a></div></td></tr></table></div><div class="Code"><a name="277126">input_bitwidth = this_block.port('din').width; </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="277130">Calculating output width: </a></div></td></tr></table></div><div class="Code"><a name="277134">output_bitwidth = ceil(log2(2^(input_bitwidth-1)*2^(coef_bitwidth-1) * </a>number_of_coef)); </div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="277138">Setting output data type: </a></div></td></tr></table></div><div class="Code"><a name="277142">dout_port.makeSigned; </a></div><div class="Code"><a name="277144">dout_port.width = output_bitwidth; </a></div><div class="Code"><a name="277146">dout_port.binpt = 12; </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="277150">Passing input and output bit widths to VHDL as generics: </a></div></td></tr></table></div><div class="Code"><a name="277152">this_block.addGeneric('input_bitwidth',this_block.port('din').width); </a></div><div class="Code"><a name="277154">this_block.addGeneric('output_bitwidth',output_bitwidth); </a></div><div class="Body"><a name="277158">For details concerning the black box configuration M-function, seethe topic </a><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.4.html#280204', '');" title="Black Box Configuration M-Function">Black Box Configuration M-Function</a></span>. </div><div class="Body"><a name="277114">If you examine the black box VHDL file transpose_fir_parametric.vhd you see generics </a><span class="Filename">input_bitwidth</span> and <span class="Filename">output_bitwidth</span> that specify input and output width. These are passed to lower-level VHDL components.</div><div class="Heading2"><a name="270750">Simulating Several </a>Black Boxes Simultaneously</div><div class="Body"><a name="288826">Several System Generator black boxes can co-simulate simultaneously, using only one </a>ModelSim license while doing so. The example shown below illustrates this. The files for the example are contained in the directory <span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/example2.</span></div><div class="Body"><a name="288827">&nbsp;</a></div><div class="Body"><a name="288828">The files contained in this directory are: </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="277339">black_box_ex2.mdl</a></span>: A Simulink model containing two black boxes. </div></td></tr></table></div><a href="javascript:void();" onClick="WWHFrame.WWHBrowser.fMLProtocol('cd(xilinx.environment.getpath(\'sysgen\'));cd examples/black_box/example2;open black_box_ex2.mdl')">(Open this model)</a><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="277343">parity_block.vhd</a></span>: VHDL for a simple state machine that tracks the running parity of an 8-bit input word. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="277347">parity_block_config.m</a></span>: The configuration M-function for the black boxes. The code has barely been changed from what was produced by the Configuration Wizard: the line that tagged the block as having a combinational feed-through path (this_block.tagAsCombinational) has been removed.</div></td></tr></table></div><div class="Heading3"><a name="282530">Black Box Tutorial Example 6: Simulating Several Black Boxes </a>Simultaneously</div><div class="Body"><a name="277326">Navigate into the </a><span class="Filename">example2</span> directory and open the example model. This is a simple model with two identical black boxes, each implementing a state machine. The state machines compute the running parity of their inputs. One black box is fed the input stream of the model and the other is fed the input stream after it has been serialized and de-serialized. Notice that no simulation model is provided for either state machine. Instead, HDL co-simulation is used to produce simulation results. The ModelSim block provides the connection between the black boxes and ModelSim. The example model is shown in the figure below.</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277404"><img class="Default" src="images/Importing_HDL_Modules.9.6.34.jpg" width="526" height="330" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body"><a name="277421">If you run the simulation, you will see a Simulink scope and ModelSim waveform window </a>that look like the figures below. The scope shows that the black boxes produce matching parity results (as expected), but with one delayed from the other by one clock cycle. The waveform window shows the same results, but viewed in ModelSim and expressed in binary. System Generator automatically configures the waveform viewer to display the input and output signals of each black box. You can also browse the design structure in ModelSim to see how System Generator has elaborated the design to combine the two black boxes.</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277420"><img class="Default" src="images/Importing_HDL_Modules.9.6.35.jpg" width="526" height="329" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body"><a name="277429">&nbsp;</a></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="277428"><img class="Default" src="images/Importing_HDL_Modules.9.6.36.jpg" width="526" height="309" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Heading2"><a name="278559">Advanced Black Box </a>Example Using ModelSim</div><div class="Body"><a name="278560">The following topics are discussed in this example: </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="278561">How to design a black box with a dynamic port interface; </a></div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="278562">How to configure a black box using mask parameters; </a></div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="278563">How to assign generic values based on input port data types; </a></div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="278564">Saving black box blocks in Simulink libraries for later reuse; </a></div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><a name="278565">How to specify custom scripts for ModelSim HDL co-simulation. </a></div></td></tr></table></div><div class="Body"><a name="278566">This example also shows a way to view signals coming from a black box. In Simulink, </a>waveforms are typically viewed with a scope. The Simulink scope block serves this purpose and the System Generator WaveScope block is available in versions 8.1 and later. The waveform viewer in the ModelSim simulator may also be used to view waveforms. In this example, a black box is configured as a specialized ModelSim waveform scope for Xilinx fixed-point signals. When a model that uses the black box scope is simulated, the signals that drive the black box are displayed in ModelSim. </div><div class="Body"><a name="278567">The files for this example are contained in the directory </a></div><div class="Body"><span class="Filename"><a name="278568">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/example5. </a></span></div><div class="Body"><a name="278569">The files contained in this directory are: </a></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="278570">black_box_ex5.mdl</a></span>: A Simulink model containing a black box scope. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="278571">scope_lib.mdl</a></span>: A Simulink library containing the black box waveform viewer. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="278572">scope_config.m</a></span>: The configuration M-function for the black box waveform viewer. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="278573">scope1.vhd, scope2.vhd</a></span>, <span class="Filename">scope3.vhd</span>, <span class="Filename">scope4.vhd</span>: Black box VHDL for the signal scope that accept one, two three, and four input signals, respectively. </div></td></tr></table></div><div class="Bulleted_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div></td><td width="100%"><div class="Bulleted_inner"><span class="Filename"><a name="282565">waveform.do</a></span> – A script that instructs ModelSim how to display signals during simulation. </div></td></tr></table></div><div class="Heading3"><a name="282566">Black Box Tutorial Exercise 7: Advanced Black Box Example Using </a>ModelSim</div><div class="Numbered_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div></td><td width="100%"><div class="Numbered_inner"><a name="282575">Navigate into the example5 directory and open the example</a><span class="Filename"> black_box_ex5.mdl</span> file. The model includes an adder that is driven by two input gateways. The gateways are configured to produce signed 8-bit values, each with six bits to the right of the binary point. Sine wave generators drive the gateways. The model also includes a black box named waveform scope. This is driven by three signals. The first input is driven by the adder. The other two are driven by the inputs to the adder. The ModelSim block enables HDL co-simulation. The example model is shown below.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="282572"><img class="Default" src="images/Importing_HDL_Modules.9.6.37.jpg" width="527" height="372" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278582">Simulate the </a><span class="Filename">black_box_ex5</span> model. A ModelSim window opens and ModelSim compiles the files necessary for simulation. After the compilation is complete, both MATLAB and ModelSim simulations begin. A ModelSim waveform viewer opens and displays four signals. The first input to the block, sig1, is driven by the adder. This signal is represented in two ways in the ModelSim viewer – binary and analog. The ModelSim waveforms for the <span class="Filename">black_box_ex5</span> simulation are shown below.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="278588"><img class="Default" src="images/Importing_HDL_Modules.9.6.38.jpg" width="527" height="394" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278589">Double click on the Simulink scope in the model. The output is shown below and </a>resembles the analog signal in the ModelSim waveform viewer.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="278595"><img class="Default" src="images/Importing_HDL_Modules.9.6.39.jpg" width="527" height="286" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="278596">The black box in this example is configured using mask parameters. There are many </a>situations in which this is useful. In this case, the number of black box input ports, i.e., the number of scope inputs, is determined by a mask parameter. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278597">Double click on the waveform scope black box. Notice a Number of Input Ports field is </a>included in the block dialog box and is unique to this black box instance. The dialog box is shown below:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="278603"><img class="Default" src="images/Importing_HDL_Modules.9.6.40.jpg" width="527" height="185" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">5.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278604">Change the number of input ports from 3 to 4 and apply the changes. The black box </a>now has an additional input port labeled<span class="Bold"> sig4</span> and should look like the following:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="278610"><img class="Default" src="images/Importing_HDL_Modules.9.6.41.jpg" width="527" height="77" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="278611">Every black box has a standard list of mask parameters. The black box in this example </a>has an additional mask parameter <span class="Filename">nports</span> that stores the number of input ports selected by the user. To change a black box mask it is necessary to disable the link to the library. When a black box is changed in this way, it is best to save the black box in a library. (See the Simulink documentation on libraries for details.) The tutorial library <span class="Filename">scope_lib.mdl</span> contains the modified signal scope black box used in this example. When a black box configuration M-function adds an HDL file, the path to the file can be relative to the directory in which the library is saved. This eliminates the need to copy the HDL into the same directory as the model. </div><div class="Body2"><a name="278612">The black box's configuration M-function is invoked whenever the block parameter </a>dialog box is modified. This allows the M-function to check the mask parameters and configure the black box accordingly. In this example, the M-function adjusts the number of block input ports based on the <span class="Filename">nports</span> parameter specified in the mask. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">6.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278613">Open the file </a><span class="Filename">scope_config.m</span> that defines the configuration M-function for the example black box. Locate the line: </div></td></tr></table></div><div class="Body2"><span class="Filename"><a name="278614">simulink_block = this_block.blockName; </a></span></div><div class="Body2"><a name="278615">This obtains the Simulink name of the black box and assigns it to the variable </a><span class="Filename">simulink_block</span>. The name is useful because it is the handle that MATLAB functions need to manipulate the block. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">7.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278616">Locate the line: </a></div></td></tr></table></div><div class="Body2"><span class="Filename"><a name="278617">nports = eval(get_param(simulink_block,'nports')); </a></span></div><div class="Body2"><a name="278618">The value of the </a><span class="Filename">nports</span> mask parameter is obtained by the <span class="Filename">get_param</span> command. The <span class="Filename">get_param</span> returns a string containing the number of ports. An <span class="Filename">eval</span> encloses the <span class="Filename">get_param</span> and converts the string into an integer that is assigned to the <span class="Filename">nports</span> variable. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">8.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278619">Once the number of input ports is determined, the M-function adds the input ports to </a>the black box. The code that does this is shown below. </div></td></tr></table></div><div class="Code"><a name="278620">for i=1:nports </a></div><div class="Code"><a name="278621">&nbsp;</a>&nbsp;this_block.addSimulinkInport(sprintf('sig%d',i)); </div><div class="Code"><a name="278622">end </a></div><div class="Body2"><a name="278623">There are four VHDL files, named </a><span class="Filename">scope1.vhd</span>, <span class="Filename">scope2.vhd</span>, <span class="Filename">scope3.vhd</span>, and <span class="Filename">scope4.vhd</span>, which the black box in this example can use. The black box associates itself to the one that declares an appropriate number of ports. </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">9.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278624">The configuration M-function selects the appropriate VHDL file for the black box. </a>Locate the following line in <span class="Filename">scope_config.m</span>: </div></td></tr></table></div><div class="Code"><span class="Filename"><a name="278625">entityName = sprintf('scope%d',nports);</a></span> </div><div class="Body2"><a name="278626">The HDL entity name for the black box is constructed by appending the value of </a><span class="Filename">nports</span> to <span class="Italic">scope</span>. The VHDL is associated with the black box in the following line: </div><div class="Code"><span class="Filename"><a name="278627">this_block.addFile(['vhdl/' entityName '.vhd']);</a></span> </div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">10.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278628">The input port widths for each VHDL entity are assigned using generics. The generic </a>name identifies the input port to which the width is assigned. For example, the width3 generic specifies the width of the third input. In <span class="Filename">scope_config.m</span>, the generic names and values are set as follows: </div></td></tr></table></div><div class="Code"><a name="278629">% ----------------------------- </a></div><div class="Code"><a name="278630">&nbsp;</a>&nbsp;if (this_block.inputTypesKnown) </div><div class="Code"><a name="278631">&nbsp;</a>&nbsp;for i=1:nports </div><div class="Code"><a name="278632">&nbsp;</a>&nbsp;width = this_block.inport(i).width; </div><div class="Code"><a name="278633">&nbsp;</a>&nbsp;this_block.addGeneric(sprintf('width%d',i),width); </div><div class="Code"><a name="278634">&nbsp;</a>&nbsp;end </div><div class="Code"><a name="278635">&nbsp;</a>&nbsp;end  % if(inputTypesKnown) </div><div class="Code"><a name="278636">% ----------------------------- </a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">11.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="278637">You can change the way ModelSim displays the signal waveforms during simulation </a>by using custom tcl scripts in the ModelSim block. Double click on the ModelSim block in the <span class="Filename">black_box_ex5</span> model. The following dialog box appears:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="278643"><img class="Default" src="images/Importing_HDL_Modules.9.6.42.jpg" width="527" height="254" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="278644">Custom scripts are defined by selecting the </a><span class="Bold">Add Custom Scripts</span> checkbox. In this case, a script named <span class="Filename">waveform.do</span> is specified in the <span class="Bold">Script to Run</span> after <span class="Bold">vsim</span> field. This script contains the ModelSim commands necessary to display the adder output as an analog waveform.</div><div class="Body2"><a name="296213">&nbsp;</a></div><div class="Heading2"><a name="296988">Importing</a><span style="font-size: 16.0pt; font-weight: bold;">, </span>Simulating, and Exporting an Encrypted VHDL File</div><div class="Body"><a name="296308">This example show you </a><span style="font-size: 9.5pt;">how to import an encrypted VHDL file into a Black Box block, </span><span style="font-size: 9.5pt;">simulate the design, then export the VHDL out as an encrypted file that is separate from the rest </span><span style="font-size: 9.5pt;">of the netlist.</span></div><div class="Heading3"><a name="296979">Black Box Tutorial Example 8: Importing, Simulating, and Exporting an </a>Encrypted VHDL File</div><div class="Numbered_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div></td><td width="100%"><div class="Numbered_inner"><a name="296309">From MATLAB, open the following MDL file: </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/black_box/example7/blac</span><span class="Filename">k_box_ex7.mdl</span></div></td></tr></table></div><table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;"><div class="Anchor"><a name="296315"><img class="Default" src="images/Importing_HDL_Modules.9.6.43.jpg" width="807" height="321" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="296316">This design imports an encrypted VHDL file generated from the licensed core </a><span class="Bold">Color </span><span class="Bold">Correction Matrix v1.0</span>. The input to the core is a 24-bit RGB signal {R, G, B} and the output is a Color transformed 24-bit signal {Rt, Gt, Bt} signal such that :</div><table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;"><div class="Anchor"><a name="296322"><img class="Default" src="images/Importing_HDL_Modules.9.6.44.jpg" width="807" height="51" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="296323">The </a><span class="Bold">active_video_in signal</span> is used to mark each <span class="Bold">video_data_in</span> sample as valid. The signals <span class="Bold">hblank_in</span> and <span class="Bold">vblank_in</span> are ignored in this example design. Refer to the <span class="Bold">Color Correction Matrix v1.0</span> LogiCORE datasheet for more information on this core.</div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="296324">The file named </a><span class="Filename">encrypted_hdl_import.vhd</span> is the encrypted simulation model generated by Core Generator. In order to import this encrypted simulation model, you must first create a VHDL wrapper file that instantiates the encrypted VHDL model. You then import this wrapper file using the standard Black Box Configuration Wizard. This process is described in the topic <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#275339', '');" title="Black Box Examples">Black Box Tutorial Example 2: Importing a Core Generator Module that Needs a VHDL Wrapper to Satisfy Black Box HDL Requirements</a></span> and has already been done for you in this example. </div></td></tr></table></div><div class="Body2"><a name="296325">During the Black Box creation process, the Black Box Configuration Wizard creates a </a>configuration file named <span class="Filename">encrypted_hdl_import_wrapper_config.m</span>. <br />Double click on the Black Box in the example design and you will see this config file specified:</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="296331"><img class="Default" src="images/Importing_HDL_Modules.9.6.45.jpg" width="357" height="297" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body2"><a name="296332">Notice also that the ISE Simulator has been been specified as the simulator to use.</a></div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="296333">In order to tell System Generator to netlist the encrypted VHDL file separately, you </a>must open the file <span class="Filename">encrypted_hdl_inport_wrapper_config.m</span> and modify the file by adding the following line:</div></td></tr></table></div><div class="Code"><span class="Size8Type"><a name="296334">this_block.addFile('encrypted_hdl_import.vhd','encrypted_hdl_import.vhd');</a></span></div><div class="Body2"><a name="296335">In the above line, the second parameter in the addFile function instructs System </a>Generator to netlist the encrypted file as a separate file and to not include the file in the consolidated VHDL netlist. The following figure shows how this line has already been added for you in this example:</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="296351"><img class="Default" src="images/Importing_HDL_Modules.9.6.46.jpg" width="515" height="296" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="296352">Press the </a><span class="Bold">Simulate</span> button to simulate the design.</div></td></tr></table></div><div class="Body2"><a name="296359">The simulation results are as shown below.</a></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="296358"><img class="Default" src="images/Importing_HDL_Modules.9.6.47.jpg" width="392" height="376" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body"><a name="296366">&nbsp;</a></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="296365"><img class="Default" src="images/Importing_HDL_Modules.9.6.48.jpg" width="413" height="378" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">5.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="296367">Double click on the System Generator Token and verify that the Compilation option is </a>set to <span class="Bold">HDL Netlist</span>. Click <span class="Bold">Generate</span>.</div></td></tr></table></div><div class="Body2"><a name="296368">A folder named </a><span class="Bold">hdl</span> is created inside the <span class="Bold">example7</span> folder.</div><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">6.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="296369">Open the </a><span class="Bold">hdl</span> folder and notice the file named <span class="Filename">encrypted_hdl_import.vhd</span>. Open the file to see that this is the encrypted file that was netlisted separately.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="296377"><img class="Default" src="images/Importing_HDL_Modules.9.6.49.jpg" width="525" height="533" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Note"><span class="XNote">Note:&nbsp;</span><a name="296547">The file </a><span class="Filename">encrypted_hdl_import.vhd</span> is for simulation purposes only. If you want to netlist this design for implementation, you’ll need to include another addFile line in the configuration file that specifies the NGC file that is created by Core Generator. Refer to the tutorial <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Importing_HDL_Modules.9.6.html#275339', '');" title="Black Box Examples">Black Box Tutorial Example 2: Importing a Core Generator Module that Needs a VHDL Wrapper to Satisfy Black Box HDL Requirements</a></span><span style="font-family: &quot;Microsoft Sans Serif&quot;; font-size: 10.0pt;"> for an example of how to do this.</span></div><div class="Heading2"><a name="307233">Black Box Tutorial Exercise 9: Prompting a User for Parameters in a </a>Simulink Model and Passing Them to a Black Box</div><div class="Body"><a name="307263">This tutorial exercise </a><span style="font-size: 9.5pt;">describes how to access generics/parameters from a masked counter and </span><span style="font-size: 9.5pt;">pass them onto the black box to override the default local parameters in the VHDL file.</span></div><div class="Numbered_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div></td><td width="100%"><div class="Numbered_inner"><a name="307310">Navigate into the directory </a><span class="Filename">&lt;ISE_Design_Suite_tree&gt;/sysgen/examples/example8</span> directory and open the file <span class="Filename">black_box_ex8.md</span>l. The model is a simple counter, which includes two input signals (<span class="Filename">reset</span> and <span class="Filename">enable</span>), a subsystem with a black box, and an output signal (<span class="Filename">count</span>) . The black box example model is shown below.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307340"><img class="Default" src="images/Importing_HDL_Modules.9.6.50.jpg" width="525" height="293" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="307311">Simulate the </a><span class="Filename">black_box_ex8</span> model.  The Simulink waveforms for the <span class="Filename">black_box_ex8</span> simulation are shown below.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307349"><img class="Default" src="images/Importing_HDL_Modules.9.6.51.jpg" width="525" height="233" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="307321">Double click on the Subsystem block and change the COUNT_MAX to a different </a>count value, simulate the design, and verify the count on the WaveScope.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307358"><img class="Default" src="images/Importing_HDL_Modules.9.6.52.jpg" width="525" height="240" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedCont_outer" style="margin-left: 0pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">4.	</div></td><td width="100%"><div class="NumberedCont_inner"><a name="307322">Next, take a look at the </a><span class="Filename">counter_config.m</span> file and examine the following lines of M-code that were added to the original machine-generated code by System Generator.</div></td></tr></table></div><div class="NumberedSub_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedSub_inner" style="width: 18pt; white-space: nowrap;">a.	</div></td><td width="100%"><div class="NumberedSub_inner"><a name="307377">Access parameters from the masked counter block:</a></div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307396"><img class="Default" src="images/Importing_HDL_Modules.9.6.53.jpg" width="525" height="375" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedSubCont_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedSubCont_inner" style="width: 18pt; white-space: nowrap;">b.	</div></td><td width="100%"><div class="NumberedSubCont_inner"><a name="307442">Set the appropriate bit width for the count output based on the </a><span class="Filename">count_max</span> value entered by a user.</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307448"><img class="Default" src="images/Importing_HDL_Modules.9.6.54.jpg" width="525" height="55" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="NumberedSubCont_outer" style="margin-left: 18pt;"><table border="0" cellspacing="0" cellpadding="0" summary=""><tr style="vertical-align: baseline;"><td><div class="NumberedSubCont_inner" style="width: 18pt; white-space: nowrap;">c.	</div></td><td width="100%"><div class="NumberedSubCont_inner"><a name="307430">Modify the </a><span class="Filename">addGeneric</span> statements as follows:</div></td></tr></table></div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307458"><img class="Default" src="images/Importing_HDL_Modules.9.6.55.jpg" width="525" height="125" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><div class="Body"><a name="307463">The following is a screen-shot of the parameters that are declared at the beginning of the </a><span class="Filename">counter.vhd</span> file.</div><table class="FigureNoTitle" style="text-align: left; width: 396pt;" cellspacing="0" summary=""><caption></caption><tr><td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396pt;"><div class="Anchor"><a name="307476"><img class="Default" src="images/Importing_HDL_Modules.9.6.56.jpg" width="525" height="89" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div></td></tr></table><script type="text/javascript" language="JavaScript1.2"><!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // --></script></blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>