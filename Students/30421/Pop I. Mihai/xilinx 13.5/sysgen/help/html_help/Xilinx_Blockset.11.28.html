<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Delay</title>
    <link rel="StyleSheet" href="css/Xilinx_Blockset.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body class="" style="" onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table align="left" summary="">
      <tr>
        <td class="WebWorks_Company_Logo_Top">
          <img src="logo.gif" alt="" />
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Xilinx_Blockset.11.1.html#387248">Xilinx Blockset</a> : Delay</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1"><a name="387248">Delay</a></div>
      <div class="Body"><span class="Italic"><a name="275630">This block is listed in the following Xilinx Blockset libraries: Basic Elements, Memory, and Index.</a></span></div>
      <div class="OneLiner"><a name="388714"><img class="Default" src="images/Xilinx_Blockset.11.28.1.jpg" width="70" height="73" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" />The Xilinx Delay block implements a fixed delay of L cycles. </a></div>
      <div class="Body"><a name="1101166">The delay value is displayed on the block in the form z</a><span class="Superscript">-L</span>, which is the <span class="Italic">Z-</span><span class="Italic">transform</span> of the block’s transfer function. Any data provided to the input of the block will appear at the output after L cycles. The rate and type of the data of the output will be inherited from the input. This block is used mainly for matching pipeline delays in other portions of the circuit. The delay block differs from the register block in that the register allows a latency of only 1 cycle and contains an initial value parameter. The delay block supports a specified latency but no initial value other than zeros.The figure below shows the <span class="Bold">Delay</span> block behavior when <span class="Bold">L=4</span> and <span class="Bold">Period=1s</span>.</div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="876624"><img class="Default" src="images/Xilinx_Blockset.11.28.2.jpg" width="529" height="261" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="877290">For delays that need to be adjusted during run-time, you should use the </a><span class="GUISysIn">Addressable </span><span class="GUISysIn">Shift Register</span> block. Delays that are not an integer number of clock cycles are not supported and such delays should not be used in synchronous design (with a few rare exceptions).</div>
      <div class="Heading2"><a name="275636">Block Parameters</a></div>
      <div class="Body"><a name="275637">The block parameters dialog box can be invoked by double-clicking the icon in your </a>Simulink model. </div>
      <div class="Heading3"><a name="875181">Basic tab</a></div>
      <div class="Body"><a name="875182">Parameters specific to the Basic tab are as follows:</a></div>
      <div class="Bulleted_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><span class="Bold"><a name="875183">Latency</a></span>: Latency is the number of cycles of delay. The latency may be zero, provided that the <span class="Bold">Provide enable port</span> checkbox is not checked. The latency must be a non-negative integer. If the latency is zero, the delay block collapses to a wire during logic synthesis. If the latency is set to L=1, the block will generally be synthesized as a flip flop (or multiple flip flops if the data width is greater than 1). </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading3"><a name="323024">Implementation tab</a></div>
      <div class="Body"><a name="540032">Parameters specific to the Implementation tab are as follows:</a></div>
      <div class="Bulleted_outer" style="margin-left: 0pt;">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><span class="Bold"><a name="875226">Implement using behavioral HDL</a></span>: uses behavioral HDL as the implementation. This allows the downstream logic synthesis tool to choose the best implementation. Other parameters used by this block are explained in the topic<br /><span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'Xilinx_Blockset.11.3.html#271277', '');" title="Common Options in Block Parameter Dialog Boxes">Common Options in Block Parameter Dialog Boxes</a></span>.</div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading2"><a name="875245">Logic Synthesis using Behavioral HDL</a></div>
      <div class="Body"><a name="875253">This setting is recommended if you are using Synplify Pro as the downstream logic </a>synthesis tool. The logic synthesis tool will implement the delay as it desires, performing optimizations such as moving parts of the delay line back or forward into blockRAMs, DSP48s, or embedded IOB flip flops; employing the dedicated SRL cascade outputs for long delay lines based on the architecture selected; and using flip flops to terminate either or both ends of the delay line based on path delays. Using this setting also allows the logic synthesis tool, if sophisticated enough, to perform retiming by moving portions of the delay line back into combinational logic clouds.</div>
      <div class="Heading2"><a name="875265">Logic Synthesis using Structural HDL</a></div>
      <div class="Body"><a name="875270">If you do not check the box </a><span class="Bold">Implement using behavioral HDL</span>, then structural HDL will be used. This is the default setting and results in a known, but less-flexible, implementation which is often better for use with XST. In general, this setting produces structural HDL comprising an SRL (Shift-Register LUT) delay of (L-1) cycles followed by a flip flop, with the SRL and the flip flop getting packed into the same slice. For a latency greater than L=17, multiple SRL/flip flop sets will be cascaded, albeit without using the dedicated cascade routes. For example, the following is the synthesis result for a 1-bit wide delay block with a latency of L=32:</div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="875948"><img class="Default" src="images/Xilinx_Blockset.11.28.3.jpg" width="534" height="349" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="875924">The first SRL provides a delay of 16 cycles and the associated flip flop adds another cycle </a>of delay. The second SRL provides a delay of 14 cycles; this is evident because the address is set to {A3,A2,A1,A0}=1101 (binary) = 13, and the latency through an SRL is the value of the address plus one. The last flip flop adds a cycle of delay, making the grand total L=16+1+14+1=32 cycles. </div>
      <div class="Body"><a name="875926">The SRL is an efficient way of implementing delays in the Xilinx architecture. An SRL and </a>its associated flip flop that comprise a single <span class="Italic">logic cell</span> can implement seventeen cycles of delay whereas a delay line consisting only of flip flops can implement only one cycle of delay per logic cell.</div>
      <div class="Body"><a name="875922">The SRL has a setup time that is longer than that of a flip flop. Therefore, for very fast </a>designs with a combinational path preceding the delay block, it may be advantageous, when using the structural HDL setting, to precede the delay block with an additional delay block with a latency of L=1. This ensures that the critical path is not burdened with the long setup time of the SRL. An example is shown below.</div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="880162"><img class="Default" src="images/Xilinx_Blockset.11.28.4.jpg" width="534" height="247" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="880175">The synthesis results of both designs are shown below, with the faster design highlighted </a>in red:</div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="880185"><img class="Default" src="images/Xilinx_Blockset.11.28.5.jpg" width="534" height="256" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="883643">Note that an equivalent to the faster design results from setting the latency of </a><span class="Italic">Inverter2</span> to <span class="Italic">1</span> and eliminating <span class="Italic">Delay3</span>. This, however, is not equivalent to setting the latency of <span class="Italic">Inverter2</span> to <span class="Italic">4</span> and eliminating the delay blocks; this would yield a synthesis equivalent to the upper (slower) design.</div>
      <div class="Heading2"><a name="884294">Implementing Long Delays</a></div>
      <div class="Body"><a name="884306">For very long delays, of, say, greater than 128 cycles, especially when coupled with larger </a>bus widths, it may be better to use a block-RAM-based delay block. The delay block is implemented using SRLs, which are part of the general fabric in the Xilinx. Very long delays should be implemented in the embedded block RAMs to save fabric. Such a delay exploits the dual-port nature of the blockRAM and can be implemented with a fixed or run-time-variable delay. Such a block is basically a block RAM with some associated address counters. The model below shows a novel way of implementing a long delay using LFSRs (linear feedback shift registers) for the address counters in order to make the design faster, but conventional counters may be used as well. The difference in value between the counters (minus the RAM latency) is the latency L of the delay line.</div>
      <table class="FigureWideNoTitle" style="text-align: left; width: 504pt;" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 504pt;">
            <div class="Anchor"><a name="884327"><img class="Default" src="images/Xilinx_Blockset.11.28.6.jpg" width="534" height="263" style="display: block; float: none; left: 0.0; top: 0.0;" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Heading2"><a name="884990">Re-settable Delays and Initial Values</a></div>
      <div class="Body"><a name="887825">If a delay line absolutely must be re-settable to zero, this can be done by using a string of L </a>register blocks to implement the delay or by creating a circuit that forces the output to be zero while the delay line is “flushed”.</div>
      <div class="Body"><a name="887827">The delay block doesn’t support initial values, but the </a><span class="Bold">Addressable Shift Register</span> block does. This block, when used with a fixed address, is generally equivalent to the delay block and will synthesize to an SRL-based delay line. The initial values pertain to initialization only and not to a reset. If using the addressable shift register in “structural HDL mode” (e.g., the <span class="Bold">Use behavioral HDL</span> checkbox is not selected) then the delay line will not be terminated with a flip flop, making it significantly slower. This can be remedied by using behavioral mode or by putting a <span class="Bold">Register</span> or <span class="Bold">Delay</span> block after the addressable shift register.</div>
      <div class="Heading2"><a name="884992">Xilinx LogiCORE</a></div>
      <div class="Body"><a name="505373">The Delay block does not use a Xilinx LogiCORE™, but is efficiently mapped to utilize the </a>SRL16 feature of Xilinx devices.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>