<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Bitstream Compilation</title>
    <link rel="StyleSheet" href="css/Compilation_Types.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table align="left">
      <tr>
        <td class="WebWorks_Company_Logo_Top">
          <img src="logo.gif" />
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="Compilation_Types.10.1.html#271503">System Generator Compilation Types</a> : Bitstream Compilation</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1"><a name="271503">Bitstream Compilation</a></div>
      <div class="Body"><a name="271524">The Bitstream compilation type allows you to compile your design into a Xilinx </a>configuration bitstream file that is suitable for the FPGA part that is selected in the System Generator dialog box. The bitstream file is named <span class="Filename">&lt;design&gt;_cw.bit</span> and is placed in the design's target directory, where <span class="Filename">&lt;design&gt;</span> is derived from the portion of the design being compiled. </div>
      <div class="Body"><a name="271528">System Generator produces the bitstream file by performing the following steps during </a>compilation: </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="271530">Generates an HDL netlist for the design; </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="271532">Runs the selected synthesis tool to produce a lower-level netlist. The type of netlist </a>(e.g., EDIF for Synplify Pro, NGC for XST) depends on which synthesis tool is chosen for compilation. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">3.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="271534">Runs </a><span class="Bold">XFLOW</span> to produce a configuration bitstream. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="271504">As shown below, you may select the Bitstream compilation by left-clicking the </a><span class="Bold">Compilation</span> submenu control on the System Generator token dialog box, and selecting the <span class="Bold">Bitstream</span> target.</div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396.0pt">
            <div class="Anchor"><a name="271579"><img class="Default" src="images/Compilation_Types.10.4.1.jpg" width="280" height="140" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="271621">System Generator uses XFLOW to run the tools necessary to produce the configuration </a>bitstream. Execution of XFLOW is broken into two flows, <span class="Italic">implementation</span> and <span class="Italic">configuration</span>. </div>
      <div class="Body"><a name="271625">The implementation flow is responsible for compiling the synthesis tool netlist output </a>(e.g., EDIF or NGC) into a placed and routed NCD file. In summary, the implementation flow performs the following tasks: </div>
      <div class="Numbered_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Numbered_inner" style="width: 18pt; white-space: nowrap;">1.	</div>
            </td>
            <td width="100%">
              <div class="Numbered_inner"><a name="271627">Combines synthesis results, core netlists, black box netlists, and constraints files using </a>NGDBuild. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="NumberedCont_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="NumberedCont_inner" style="width: 18pt; white-space: nowrap;">2.	</div>
            </td>
            <td width="100%">
              <div class="NumberedCont_inner"><a name="271629">Runs MAP, PAR, and Trace on the design (in that particular order). </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Body"><a name="271633">The configuration flow type runs the tools (e.g., BitGen) necessary to create an FPGA BIT </a>file, using the fully elaborated NCD file as input. </div>
      <div class="Heading2"><a name="271637">XFLOW Option Files</a></div>
      <div class="Body"><a name="279286">The implementation and configuration flow types have separate XFLOW options files </a>associated with them. An XFLOW options file declares the programs that should be run for a particular flow, and defines the command line options that are used by these tools. The Xilinx ISE® software includes several example XFLOW options files. From the base directory of your Xilinx ISE software tree, these files are located under the xilinx\data directory. Three commonly used implementation options files include: </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="271641">balanced.opt; </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="271643">fast_runtime.opt; </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="271645">high_effort.opt. </a></div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Note">
        <span class="XNote">Note:&nbsp;</span><a name="271649">By default, System Generator uses the </a><span class="Filename">balanced.opt</span> file for the implementation flow, and <span class="Filename">bitgen.opt</span> file for the configuration flow. </div>
      <div class="Body"><a name="271617">Sometimes you may want to use options files that use settings that differ (e.g., to specify a </a>higher placer effort level in PAR) from the default options provided by the target. In this case, you may create your own options files, or edit the default options files to include your desired settings. The Bitstream settings dialog box allows you to specify options files other than the default files.</div>
      <div class="Heading2"><a name="279292">Additional Settings</a></div>
      <div class="Body"><a name="271686">You may access additional compilation settings specific to Bitstream compilation by </a>clicking on the <span class="Bold">Settings...</span> button when <span class="Bold">Bitstream</span> is selected as the compilation type in the System Generator token dialog box. Parameters specific to the Bitstream Settings dialog box include: </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><a name="271701">I</a><span class="Bold">mport Top-level Netlist</span>: Allows you to specify your own top-level netlist into which the System Generator portion of the design is included as a module. You may choose to import your own top-level netlist if you have a larger design that instantiates the System Generator clock wrapper level as a component. Refer to the <span class="XBlueLink"><a href="javascript:WWHClickedPopup('sysgen', 'HW_Design.06.05.html#283507', '');" title="Automatic Code Generation">Compilation Results</a></span> topic for more information on the clock wrapper level. This top-level netlist is included in the bitstream file that is generated during compilation. Selecting this checkbox enables the edit fields Top-level Netlist File (EDIF or NGC) and Search Path for Additional Netlist and Constraint Files. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="271703">Top-level Netlist File (EDIF or NGC)</a></span>: Specifies the name and location of the top-level netlist file to include during compilation. Note that any HDL components that are used by your top-level (including the top-level itself) must have been previously synthesized into netlist files. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="271705">Search Path for Additional Netlist and Constraint Files</a></span>: Specifies the directory where System Generator should look for additional netlist and constraint files that go along with the top-level netlist file. System Generator copies all netlist (e.g., .<span class="Filename">edn</span>, <span class="Filename">.edf</span>, <span class="Filename">.ngc</span>) and constraints files (e.g., <span class="Filename">.ucf</span>, <span class="Filename">.xcf</span>, <span class="Filename">.ncf</span>) into the implementation directory when this directory is specified. If you do not specify a directory, System Generator will only copy the netlist file specified in the <span class="Bold">Top-</span><span class="Bold">level Netlist Fi</span><span class="Bold" style="font-family: &quot;Microsoft Sans Serif&quot;">le</span> field. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><span class="Bold"><a name="271707">Specify Alternate Clock Wrapper</a></span>: Allows you to substitute your own clock wrapper logic in place of the clock wrapper HDL System Generator produces. The clock wrapper level is the top-level HDL file that is created for a System Generator design, and is responsible for driving the clock and clock enable signals in that design. Sometimes you may want to supply your own clock wrapper, for example, if your design uses multiple clock signals, or if you have a board-specific hardware you would like your design to interface to. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Note2">
        <span class="XNote">Note:&nbsp;</span><a name="271925">The name of the alternate clock wrapper file must be named </a><span class="Filename">&lt;design&gt;_cw.vhd</span> or <span class="Filename">&lt;design&gt;_cw.v</span> or it will not be used during bitstream generation. </div>
      <div class="Bulleted_outer" style="margin-left: 0pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="Bulleted_inner" style="width: 18pt; white-space: nowrap;">•      </div>
            </td>
            <td width="100%">
              <div class="Bulleted_inner"><span class="Bold"><a name="271709">XFLOW Option Files</a></span>: When a design is compiled for System Generator hardware co-simulation, the command line tool, XFLOW, is used to implement and configure your design for the selected FPGA platform. XFLOW defines various flows that determine the sequence of programs that should be run on your design during compilation. There are typically multiple flows that must be run in order to achieve the desired output results, which in the case of hardware co-simulation targets, is a configuration bitstream. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="271711">Implementation Phase (NBDBuild, MAP, PAR, TRACE)</a></span>: Specifies the options file that is used by the implement flow type. By default, System Generator will use the implement options file that is specified by the compilation target. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="BulletedSub_outer" style="margin-left: 18pt">
        <table border="0" cellspacing="0" cellpadding="0" summary="">
          <tr style="vertical-align: baseline;">
            <td>
              <div class="BulletedSub_inner" style="width: 18pt; white-space: nowrap;">•</div>
            </td>
            <td width="100%">
              <div class="BulletedSub_inner"><span class="Bold"><a name="271693">Configuration Phase (BitGen)</a></span>: Specifies the options file that is used by the configuration flow type. By default, System Generator will use the configuration options file that is specified by the compilation target. </div>
            </td>
          </tr>
        </table>
      </div>
      <div class="Heading2"><a name="279477">Re-Compiling EDK Processor Block Software Programs in Bitstreams</a></div>
      <div class="Body"><a name="279441">When you perform bitstream compilation on a System Generator design with an EDK </a>Processor block, the imported EDK project and the shared memories sitting between the System Generator design and MicroBlaze™ processor are netlisted and included in the resulting bitstream. </div>
      <div class="Body"><a name="279443">System Generator also tries to compile any active software programs inside the imported </a>EDK project. If the compilation of active software programs succeeds, System Generator invokes the <span class="Bold">data2bram</span> utility to include the compiled software programs into the resulting bitstream. </div>
      <div class="Note">
        <span class="XNote">Note:&nbsp;</span><a name="279518">No error or warning message is issued when System Generator encounters failures during </a>software program compilation or when System Generator updates the resulting bitstream with the compiled software programs.</div>
      <div class="Body"><a name="279445">You can modify the software programs in the imported EDK project and use the following </a>command to compile the software programs, and update the System Generator bitstream with the compiled software programs: </div>
      <div class="Code"><a name="279447">xlProcBlockCallbacks('updatebitstream', [], xmp_file, bit_file, </a>bmm_file);</div>
      <div class="Body"><a name="279540">where</a></div>
      <div class="Code"><span class="Bold"><a name="279449">xmp_file</a></span> is the pathname to the imported EDK project file</div>
      <div class="Code"><span class="Bold"><a name="279450">bit_file</a></span> is the pathname to the Sysgen bitstream file</div>
      <div class="Code"><span class="Bold"><a name="279451">bmm_file</a></span> is the pathname of the back-annotated BMM file produced by Sysgen during bitstream compilation</div>
      <div class="Body"><a name="279453">If the imported EDK project contains a BMM file named </a><span class="Filename">imported_edk_project.bmm</span>, System Generator creates a back-annotated BMM file named <span class="Filename">imported_edk_project_bd.bmm</span>. You should provide the later back-annotated BMM file to the above command in order to update the bitstream properly.</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>