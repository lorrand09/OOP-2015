<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <!-- MOTW-DISABLED saved from url=(0014)about:internet -->
    <title>Hardware Co-Simulation Clocking</title>
    <link rel="StyleSheet" href="css/HW_CoSim.css" type="text/css" media="all" />
    <link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" />
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
    <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        var  WebWorksRootPath = "";
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        // Set reference to top level help frame
        //
        var  WWHFrame = WWHGetWWHFrame("", true);
      // -->
    </script>
    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>
  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">
    <table align="left">
      <tr>
        <td class="WebWorks_Company_Logo_Top">
          <img src="logo.gif" />
        </td>
      </tr>
    </table>
    <br clear="all" />
    <br />
    <div class="WebWorks_Breadcrumbs" style="text-align: left;">
      <a class="WebWorks_Breadcrumb_Link" href="HW_CoSim.08.01.html#294724">Using Hardware Co-Simulation</a> : Hardware Co-Simulation Clocking</div>
    <hr align="left" />
    <blockquote>
      <div class="Heading1"><a name="294724">Hardware Co-Simulation Clocking</a></div>
      <div class="Heading2"><a name="294725">Selecting the Target Clock Frequency</a></div>
      <div class="Body"><a name="294726">If you are using a Xilinx ML402 or ML506 board, System Generator allows you to choose a </a>clock frequency for the target design that is equal to or less than the system clock frequency. The following table outlines the frequencies that are available:</div>
      <table class="ColumnNoTitle" style="text-align: left; width: 384.5133pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="border-bottom-color: #b50042; border-bottom-style: solid; border-bottom-width: 1.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: middle; width: 79.2pt">
            <div class="CellHeading"><a name="294776">Board</a></div>
          </td>
          <td style="border-bottom-color: #b50042; border-bottom-style: solid; border-bottom-width: 1.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: middle; width: 142.559pt">
            <div class="CellHeading"><a name="294778">Interface</a></div>
          </td>
          <td style="border-bottom-color: #b50042; border-bottom-style: solid; border-bottom-width: 1.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: middle; width: 71.2795pt">
            <div class="CellHeading"><a name="294780">System Clock </a>Frequency</div>
          </td>
          <td style="border-bottom-color: #b50042; border-bottom-style: solid; border-bottom-width: 1.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: middle; width: 91.4748pt">
            <div class="CellHeading"><a name="294782">Available </a>Frequencies</div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #b50042; border-top-style: solid; border-top-width: 1.5pt; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="294784">Xilinx ML402</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #b50042; border-top-style: solid; border-top-width: 1.5pt; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyIndent"><a name="294786">JTAG,</a><br />Point-to-point Ethernet,<br />Network-based Ethernet</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #b50042; border-top-style: solid; border-top-width: 1.5pt; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="294788">100 MHz</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #b50042; border-top-style: solid; border-top-width: 1.5pt; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="295346">100 MHz</a></div>
            <div class="CellBodyCenter"><a name="295347">66.7 MHz</a></div>
            <div class="CellBodyCenter"><a name="295348">50 MHz</a></div>
            <div class="CellBodyCenter"><a name="295349">33.3 MHz</a></div>
          </td>
        </tr>
        <tr>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="294792">Xilinx ML506</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyIndent"><a name="294794">Point-to-point Ethernet,</a><br />Network-based Ethernet</div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="294796">200 MHz</a></div>
          </td>
          <td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 1px; border-left-color: #000000; border-left-style: solid; border-left-width: 1px; border-right-color: #000000; border-right-style: solid; border-right-width: 1px; border-top-color: #000000; border-top-style: solid; border-top-width: 1px; padding-bottom: 2pt; padding-left: 1.5pt; padding-right: 1.5pt; padding-top: 3pt; vertical-align: top">
            <div class="CellBodyCenter"><a name="294821">100 MHz</a></div>
            <div class="CellBodyCenter"><a name="294822">66.7 MHz</a></div>
            <div class="CellBodyCenter"><a name="294823">50 MHz</a></div>
            <div class="CellBodyCenter"><a name="294824">33.3 MHz</a></div>
          </td>
        </tr>
      </table>
      <div class="Body"><a name="294966">As shown below, you set the target clock frequency at compilation time, by clicking the </a><span class="Bold">Settings</span> button on the System Generator token dialog box, then select the frequency in the pulldown menu.</div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396.0pt">
            <div class="Anchor"><a name="295016"><img class="Default" src="images/HW_CoSim.08.05.1.jpg" width="395" height="272" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Heading2"><a name="271758">Clocking Modes</a></div>
      <div class="Body"><a name="294671">There are several ways in which a System Generator hardware co-simulation block can be </a>synchronized with its associated FPGA hardware. In single-step mode, the FPGA is in effect clocked from Simulink, whereas in free-running clock mode, the FPGA runs off an internal clock, and is sampled asynchronously when Simulink wakes up the hardware co-simulation block. </div>
      <div class="Heading3"><a name="271761">Single-Step Clock</a></div>
      <div class="Body"><a name="271764">In single-step clock mode, the hardware is kept in lock step with the software simulation. </a>This is achieved by providing a single clock pulse (or some number of clock pulses if the FPGA is over-clocked with respect to the input/output rates) to the hardware for each simulation cycle. In this mode, the hardware co-simulation block is bit-true and cycle-true to the original model. </div>
      <div class="Body"><a name="271768">Because the hardware co-simulation block is in effect producing the clock signal for the </a>FPGA hardware only when Simulink awakes it, the overhead associated with the rest of the Simulink model's simulation, and the communication overhead (e.g. bus latency) between Simulink and the FPGA board can significantly limit the performance achieved by the hardware. As a general rule of thumb, as long as the amount of computation inside the FPGA is significant with respect to the communication overhead (e.g. the amount of logic is large, or the hardware is significantly over-clocked), the hardware will provide significant simulation speed-up. </div>
      <div class="Heading3"><a name="271771">Free-Running Clock</a></div>
      <div class="Body"><a name="271774">In free-running clock mode, the hardware runs asynchronously relative to the software </a>simulation. Unlike the single-step clock mode, where Simulink effectively generates the FPGA clock, in free-running mode, the hardware clock runs continuously inside the FPGA itself. </div>
      <div class="Body"><a name="271778">In this mode, simulation is not bit and cycle true to the original model, because Simulink is </a>only sampling the internal state of the hardware at the times when Simulink awakes the hardware co-simulation block. The FPGA port I/O is no longer synchronized with events in Simulink. When an event occurs on a Simulink port, the value is either read from or written to the corresponding port in hardware at that time. However, since an unknown number of clock cycles have elapsed in hardware between port events, the current state of the hardware cannot be reconciled to the original System Generator model. For many streaming applications, this is in fact highly desirable, as it allows the FPGA to work at full speed, synchronizing only periodically to Simulink. </div>
      <div class="Body"><a name="271782">In free-running mode, you must build explicit synchronization mechanisms into the </a>System Generator model. A simple example is a status register, exposed as an output port on the hardware co-simulation block, which is set in hardware when a condition is met. The rest of the System Generator model can poll the status register to determine the state of the hardware. </div>
      <div class="Heading2"><a name="271785">Selecting the Clock Mode</a></div>
      <div class="Body"><a name="271744">Not every hardware board supports a free running clock. However, for those that do, the </a>parameters dialog box for the hardware co-simulation block provides a means to select the desired clocking mode. You may change the co-simulation clocking mode before simulation starts by selecting either the <span class="Bold">Single stepped</span> or <span class="Bold">Free running</span> radio button under the <span class="Bold">Clocking</span> etch box. </div>
      <div class="Body"><a name="271962">&nbsp;</a></div>
      <table class="FigureNoTitle" style="text-align: left; width: 396pt" cellspacing="0" summary="">
        <caption></caption>
        <tr>
          <td style="padding-bottom: 0pt; padding-left: 0pt; padding-right: 0pt; padding-top: 0pt; vertical-align: top; width: 396.0pt">
            <div class="Anchor"><a name="271973"><img class="Default" src="images/HW_CoSim.08.05.2.jpg" width="218" height="216" style="display: block; float: none; left: 0.0; top: 0.0" alt="" /></a></div>
          </td>
        </tr>
      </table>
      <div class="Note">
        <span class="XNote">Note:&nbsp;</span><a name="271985">The clocking options available to a hardware co-simulation block depend on the FPGA board </a>being used (i.e., some boards may not support a free-running clock source, in which case it is not available as a dialog box parameter).</div>
      <script type="text/javascript" language="JavaScript1.2">
        <!--
          // Clear related topics
          //
          WWHClearRelatedTopics();

          document.writeln(WWHRelatedTopicsInlineHTML());
        // -->
      </script>
    </blockquote>
    <script type="text/javascript" language="JavaScript1.2">
      <!--
        document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
      // -->
    </script>
  </body>
</html>